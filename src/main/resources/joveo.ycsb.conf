db = {
  mock-db-conf = {
    console = true
    output = /tmp/ycsb/mock.db/
  }
  db-class = com.x.y.ScyllaDB
  config = {
    #hosts = "127.0.0.1,127.0.0.2,127.0.0.3"
    username = scylla
    password = "abc"
    data-center = "AWS_US_EAST_1"
    request-timeout-ms = 5000
  }
}

seed = {
  dir = /home/rchaki/data/ycsb/seed/jobs/
  loaders = [
    { id = job_id, path = "job_id", dir: /home/rchaki/data/ycsb/output/jobs/ },
    { id = client_id, path = "client_id" },
    { id = content_gzipped, path = "content_gzipped" },
    { id = url_original, path = "url_original" },
    { id = url_joveo, path = "url_joveo" },
  ]
}

schema = {
  db = joveo
  table = jobs
  key = { name = job_id, type = text-field, generator = SEED_SEQ }
  fields = [
    { name = client_id, type = text-field, generator = SEED_SEQ },
    { name = content_gzipped, type = blob-field, generator = SEED_SEQ },
    { name = url_original, type = text-field, generator = SEED_SEQ },
    { name = url_joveo, type = text-field, generator = SEED_SEQ },
    { name = created_at, type = timestamp-field, generator = RANDOM },
    { name = last_updated_at, type = timestamp-field, generator = RANDOM },
    { name = is_active, type = boolean-field, generator = RANDOM },
    { name = cpc, type = int-field, generator = RANDOM },
    { name = cpa, type = int-field, generator = RANDOM }
    { name = cap, type = int-field, generator = RANDOM }
  ]
}


load = {
  persist-keys = true
  output_path = /home/rchaki/data/ycsb/output/jobs/jobs_id
  name = "load"
  type = load
  key = { name=job_id, generator = { type: seed-text-generator, id = job_id }, thread-unique = true}
  fields = [
    { name=client_id, generator = { type: seed-text-generator, id = client_id } },
    { name=content_gzipped, generator = { type: seed-blob-generator, id = content_gzipped } },
    { name=url_original, generator = { type: seed-text-generator, id = url_original } },
    { name=url_joveo, generator = { type: seed-text-generator, id = url_joveo } },
    { name=created_at, generator = { type: timestamp-generator, id = client_id } },
    { name=last_updated_at, generator = { type: timestamp-generator } },
    { name=is_active, generator = { type: boolean-generator } },
    { name=cpc, generator = { type: int-generator } },
    { name=cpa, generator = { type: int-generator } },
    { name=cap, generator = { type: int-generator } }
  ]
}

transactions = [
  {
    name = "insert_job"
    type = create
    load = 10.0
    key = { name=job_id, generator = { type: text-generator }, thread-unique = true }
    fields = [
      { name=client_id, generator = { type: seed-text-generator, id = client_id } },
      { name=content_gzipped, generator = { type: seed-text-generator, id = content_gzipped } },
      { name=url_original, generator = { type: seed-text-generator, id = url_original } },
      { name=url_joveo, generator = { type: seed-text-generator, id = url_joveo } },
      { name=created_at, generator = { type: timestamp-generator, id = client_id } },
      { name=last_updated_at, generator = { type: timestamp-generator } },
      { name=is_active, generator = { type: boolean-generator } },
      { name=cpc, generator = { type: int-generator } },
      { name=cpa, generator = { type: int-generator } },
      { name=cap, generator = { type: int-generator } }
    ]
  },
  {
    name = "read_url"
    type = read
    load = 10.0
    key = { name=job_id, generator = { type: seed-text-generator, id = job_id } }
    non-key-fields = [ url_original ]
  },
  {
    name = "read_content"
    type = read
    load = 20.0
    key = { name=job_id, generator = { type: seed-text-generator, id = job_id } }
    non-key-fields = [ content_gzipped ]
  },
  {
    name = "read_settings"
    type = read
    load = 40.0
    key = { name=job_id, generator = { type: seed-text-generator, id = job_id } }
    non-key-fields = [ is_active, cpc, cpa, cap ]
  },
  {
    name = "update_settings"
    type = update
    load = 10.0
    key = { name=job_id, generator = { type: seed-text-generator, id = job_id } }
    fields = [
      { name=is_active, generator = { type: boolean-generator } },
      { name=cpc, generator = { type: int-generator } },
      { name=cpa, generator = { type: int-generator } },
      { name=cap, generator = { type: int-generator } }
    ]
  },
  {
    name = "update_content"
    type = update
    load = 10.0
    key = { name=job_id, generator = { type: seed-text-generator, id = job_id } }
    fields = [
      { name=content_gzipped, generator = { type: seed-text-generator, id = content_gzipped } }
    ]
  }
]